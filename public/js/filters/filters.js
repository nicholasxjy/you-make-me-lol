(function() {  'use strict';  angular    .module('showfieApp')    .filter('sinceTime', function() {      return function(date) {        var newDate = new Date(date);        var year = newDate.getFullYear();        var month = newDate.getMonth();        var day = newDate.getDay();        var hour = newDate.getHours();        var minutes = newDate.getMinutes();        var now = new Date();        var msseconds = -(newDate.getTime() - now.getTime());        var time_step = [1000, 1000*60, 1000*60*60, 1000*60*60*24];        if (msseconds < time_step[3]) {          if (msseconds > 0 && msseconds < time_step[1]) {            return Math.floor(msseconds/time_step[0]) + " secs ago";          }          if (msseconds > time_step[1] && msseconds < time_step[2]) {            return Math.floor(msseconds/time_step[1]) + " mins ago";          }          if (msseconds > time_step[2] && msseconds < time_step[3]) {            return Math.floor(msseconds/time_step[2]) + " hours ago";          }        }        var hour = ("0"+hour).slice(-2);        var minutes = ("0"+minutes).slice(-2);        return hour+":"+minutes;      }    })    .filter('formatCount', function() {      return function(count) {        var count = parseInt(count, 10);        if (count >= 10000) {          count = count/1000;          return count+"k";        }        return count;      }    })    .filter('overflowFormat', function() {      return function(profile) {        if (profile && profile.length > 0) {          var len = 0;          var fStr = '';          for(var i = 0; i < profile.length; i++) {            var c = profile.charCodeAt(i);            fStr += profile[i];            if ((c >= 0x0001 && c <= 0x007e) || (c >= 0xff60 && c <= 0xff9f)) {              len++;            } else {              len += 2;            }            if (len > 90) {              return fStr + "...";            }          }          return fStr;        } else {          return profile;        }      }    })})();