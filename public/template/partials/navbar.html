<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" ui-sref="home">Friendfies</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li ui-sref-active="active">
          <a ui-sref="home">Home</a>
        </li>
        <li ui-sref-active="active">
          <a ui-sref="explore">Explore</a>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Messages
            <span class="badge noti-badge">{{ctrl.current_user.notifications.length}}</span></a>
          <ul class="dropdown-menu noti-drop-menu" role="menu">
            <li class="dropdown-arrow noti-arrow"></li>
            <li>
              <div class="check-unread-notis">
                Marked all unread notifications <i class="ti-check-box pull-right"></i>
              </div>
            </li>
            <li class="divider"></li>
            <li class="noti-list-item" ng-repeat="noti in ctrl.current_user.notifications">
              <article class="noti-item-{{$index}}" ng-if="noti.noti_type=='LIKE'">
                <a class="noti-item-link" ui-sref="feed({id: noti.to_feed})"></a>
                <div class="media">
                  <div class="media-left">
                    <a ui-sref="user({name: noti.sender.name})">
                      <img class="media-object img-responsive img-rounded" ng-src="{{noti.sender.avatar}}">
                    </a>
                  </div>
                  <div class="media-body">
                    <h4 class="media-heading">{{noti.sender.name}}<span class="noti-time pull-right">{{noti.createdAt | date: 'yyyy-MM-dd HH:mm'}}</span></h4>
                    <p>{{noti.noti_text}}</p>
                  </div>
                </div>
              </article>
              <article class="noti-item" ng-if="noti.noti_type=='FOLLOW'">
                <a class="noti-item-link" ui-sref="user({name: noti.sender.name})"></a>
                <div class="media">
                  <div class="media-left">
                    <a ui-sref="user({name: noti.sender.name})">
                      <img class="media-object img-responsive img-rounded" ng-src="{{noti.sender.avatar}}">
                    </a>
                  </div>
                  <div class="media-body">
                    <h4 class="media-heading">{{noti.sender.name}}<span class="noti-time pull-right">{{noti.createdAt | date: 'yyyy-MM-dd HH:mm'}}</span></h4>
                    <p>{{noti.noti_text}}</p>
                  </div>
                </div>
              </article>
              <article class="noti-item" ng-if="noti.noti_type=='COMMENT'">
                <a class="noti-item-link" ui-sref="feed({id: noti.to_feed})"></a>
                <div class="media">
                  <div class="media-left">
                    <a ui-sref="user({name: noti.sender.name})">
                      <img class="media-object img-responsive img-rounded" ng-src="{{noti.sender.avatar}}">
                    </a>
                  </div>
                  <div class="media-body">
                    <h4 class="media-heading">{{noti.sender.name}}<span class="noti-time pull-right">{{noti.createdAt | date: 'yyyy-MM-dd HH:mm'}}</span></h4>
                    <p ng-bind-html="noti.noti_text"></p>
                  </div>
                </div>
              </article>
            </li>
            <li class="divider"></li>
            <li>
              <div class="see-all-noti">
                <a ui-sref="messages">see all messages</a>
              </div>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="navbar-action-item">
          <a class="navbar-action-link"><i class="ti-search"></i></a>
        </li>
        <li class="navbar-action-item">
          <a class="navbar-action-link" sf-create-feed current-user="ctrl.current_user" users-at="ctrl.usersAt"><i class="ti-pencil-alt"></i></a>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle navbar-user-dropdown" data-toggle="dropdown" role="button" aria-expanded="false">
            <img ng-src="{{ctrl.current_user.avatar}}" alt="" class="img-responsive img-circle">
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-arrow user-arrow"></li>
            <li><a ui-sref="user({name: ctrl.current_user.name})">{{ctrl.current_user.name}}</a></li>
            <li><a ui-sref="setting">settings</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a ng-click="logout">Logout</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
