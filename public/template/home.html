<div ng-controller="HomeCtrl as ctrl" class="main">
  <div ng-include="'template/partials/navbar.html'"></div>
  <div class="main-content">
    <div class="main-content-inner">
      <div class="main-container">
        <div class="container">
          <div class="row">
            <div class="col-md-3">
              <div class="sf-card user-card">
                <div class="card-top">
                  <div class="user-card-banner" style="background-image: url('{{ctrl.current_user.bg_image}}')">
                  </div>
                  <div class="user-avatar">
                    <img src="{{ctrl.current_user.avatar}}" alt="Avatar" class="img-responsive img-circle">
                  </div>
                  <div class="user-link">
                    <a ui-sref="user({name: ctrl.current_user.name})">{{ctrl.current_user.name}}</a>
                  </div>
                  <div class="user-other">
                    <i class="ti-user"></i><span>{{ctrl.current_user.gender}}</span>
                    <i class="ti-location-pin"></i><span>{{ctrl.current_user.location}}</span>
                  </div>
                  <div class="user-profile">
                    {{ctrl.current_user.profile}}
                  </div>
                  <ul class="list-inline user-info-list">
                    <li class="info-item">
                      <a href="">
                        <div class="info-item-title">Posts</div>
                        <div class="info-item-count">{{ctrl.current_user.post_count}}</div>
                      </a>
                    </li>
                    <li class="info-item">
                      <a href="">
                        <div class="info-item-title">Followers</div>
                        <div class="info-item-count">{{ctrl.current_user.followers.length}}</div>
                      </a>
                    </li>
                    <li class="info-item">
                      <a href="">
                        <div class="info-item-title">Followees</div>
                        <div class="info-item-count">{{ctrl.current_user.followees.length}}</div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="sf-feed slide-down" ng-repeat="feed in ctrl.feeds">
                <div class="sf-feed-inner">
                  <div class="feed-top">
                    <div class="user-avatar">
                      <img ng-src="{{feed.creator.avatar}}" class="img-circle" sf-user-card-popover user="feed.creator" current-user="ctrl.current_user">
                    </div>
                    <div class="user-other">
                      <div class="user-name">
                        <a class="user-name-link" ui-sref="user({name: feed.creator.name})">{{feed.creator.name}}</a>
                        <div sf-feed-action-more feed="feed" current-user="ctrl.current_user" class="pull-right"></div>
                      </div>
                      <div class="feed-time-location">
                        <span class="time" ng-cool-tooltip="{{feed.createdAt | date: 'yyyy-MM-dd HH:mm'}}">
                          Shared on - {{feed.createdAt | sinceTime}}
                        </span>
                        <span class="location">
                          <i class="ti-location-pin"></i>
                          {{feed.location}}
                        </span>
                      </div>
                    </div>
                  </div>

                  <div class="feed-content">
                    <div class="feed-text-words" ng-if="feed.content">
                      <div ng-bind-html="feed.content"></div>
                    </div>

                    <div class="feed-images" ng-if="feed.category =='image'">
                      <div class="feed-image-container" ng-repeat="image in feed.attach_files">
                        <img ng-src="{{image.url}}" alt="" class="img-responsive" width="100%"
                        sf-feed-detail-show current-user="ctrl.current_user" users-at="ctrl.usersAt" feed-id="feed._id" current-image-index="{{$index}}">
                      </div>
                    </div>

                    <div class="feed-video-container" ng-if="feed.category == 'video'">
                      <ng-cool-video source="feed.source"></ng-cool-video>
                    </div>

                    <div class="feed-audio-container" ng-if="feed.category == 'audio'">
                      <ng-cool-audio source="feed.source"></ng-cool-audio>
                    </div>
                  </div>

                  <div class="feed-tags" ng-if="feed.tags && feed.tags.length> 0">
                    <a class="tag-item" ng-repeat="tag in feed.tags">{{tag.text}}</a>
                  </div>
                  <div sf-feed-action feed="feed" current-user="ctrl.current_user"></div>
                  <div class="feed-comments">
                    <div class="comments-more" ng-if="feed.comments.length>3">
                      <a href="">More Comments</a>
                    </div>
                    <div class="feed-comment-item" ng-repeat="comment in feed.comments">
                      <div class="comment-user-avatar">
                        <a ui-sref="user({name: comment.creator.name})">
                          <img ng-src="{{comment.creator.avatar}}" alt="" class="img-rounded">
                        </a>
                      </div>
                      <div class="comment-content">
                        <div class="top">
                          <a class="comment-user-name" ui-sref="user({name: comment.creator.name})">{{comment.creator.name}}</a><span class="comment-time">{{comment.createdAt | sinceTime}}</span>
                        </div>
                        <div class="comment-words" ng-bind-html="comment.content">
                        </div>
                      </div>
                    </div>
                  <div class="feed-add-comment-wrap" sf-feed-add-comment feed="feed" users-at="ctrl.usersAt"></div>
                  </div>
                </div>
              </div>

              <div class="load-more" ng-click="ctrl.loadMore()">
                <div ng-include="template/spinner.html" ng-show="ctrl.loadMoreSpinnerShow"></div>
                <span ng-show="!ctrl.loadMoreSpinnerShow">{{ctrl.loadMoreTip || '加载更多'}}</span>
              </div>

            </div>
            <div class="col-md-3">
              <svg display="none" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                <symbol id="icon-sun" viewBox="0 0 1024 1024">
                	<title>sun</title>
                	<path class="path1" d="M512 288c-123.5 0-224 100.5-224 224s100.5 224 224 224 224-100.5 224-224c0-123.5-100.5-224-224-224zM512 672c-88.376 0-160-71.624-160-160s71.624-160 160-160 160 71.624 160 160-71.624 160-160 160zM512 224c17.666 0 32-14.334 32-32v-64c0-17.666-14.334-32-32-32s-32 14.334-32 32v64c0 17.666 14.334 32 32 32zM512 800c-17.666 0-32 14.334-32 32v64c0 17.666 14.334 32 32 32s32-14.334 32-32v-64c0-17.666-14.334-32-32-32zM760.876 308.334l45.25-45.25c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-45.25 45.25c-12.5 12.5-12.5 32.75 0 45.25 12.498 12.5 32.75 12.5 45.25 0zM263.124 715.668l-45.25 45.25c-12.5 12.498-12.5 32.748 0 45.248s32.75 12.5 45.25 0l45.25-45.248c12.5-12.542 12.5-32.752 0-45.25-12.498-12.502-32.75-12.544-45.25 0zM224 512c0-17.666-14.334-32-32-32h-64c-17.666 0-32 14.334-32 32s14.334 32 32 32h64c17.666 0 32-14.334 32-32zM896 480h-64c-17.666 0-32 14.334-32 32s14.334 32 32 32h64c17.666 0 32-14.334 32-32s-14.334-32-32-32zM263.082 308.334c12.502 12.5 32.752 12.5 45.25 0 12.502-12.5 12.502-32.75 0-45.25l-45.25-45.25c-12.5-12.5-32.748-12.5-45.25 0-12.5 12.5-12.5 32.75 0 45.25l45.25 45.25zM760.918 715.624c-12.542-12.5-32.752-12.5-45.25 0-12.502 12.5-12.542 32.75 0 45.25l45.25 45.25c12.498 12.5 32.748 12.5 45.248 0s12.5-32.748 0-45.25l-45.248-45.25z"></path>
                </symbol>
                <symbol id="icon-cloudy" viewBox="0 0 1024 1024">
                	<title>cloudy</title>
                	<path class="path1" d="M416 128c17.666 0 32-14.334 32-32v-64c0-17.666-14.334-32-32-32s-32 14.334-32 32v64c0 17.666 14.334 32 32 32zM664.876 212.334l45.25-45.25c12.498-12.5 12.498-32.75 0-45.25-12.5-12.5-32.75-12.5-45.25 0l-45.25 45.25c-12.5 12.5-12.5 32.75 0 45.25 12.498 12.5 32.75 12.5 45.25 0zM32 448h64c17.666 0 32-14.334 32-32s-14.334-32-32-32h-64c-17.666 0-32 14.334-32 32s14.334 32 32 32zM704 416c0 17.666 14.334 32 32 32h64c17.666 0 32-14.334 32-32s-14.334-32-32-32h-64c-17.666 0-32 14.334-32 32zM167.082 212.334c12.502 12.5 32.752 12.5 45.25 0 12.502-12.5 12.502-32.75 0-45.25l-45.25-45.25c-12.5-12.5-32.748-12.5-45.25 0-12.5 12.5-12.5 32.75 0 45.25l45.25 45.25zM800 512c-10.624 0-21.124 0.75-31.584 2.25-33.542-45.75-78.248-80.666-128.916-103-2.582-121.25-101.624-219.25-223.5-219.25-123.5 0-224 100.5-224 224 0 34.876 8.668 67.5 23 96.876-119.25 4.874-215 102.748-215 223.124 0 123.5 100.5 224 224 224 27.376 0 54.168-5 79.418-14.666 57.914 50.5 131.582 78.666 208.582 78.666 77.084 0 150.666-28.166 208.582-78.666 25.25 9.666 52.042 14.666 79.418 14.666 123.5 0 224-100.5 224-224s-100.5-224-224-224zM416 256c79.624 0 145.124 58.334 157.416 134.5-20.042-4-40.498-6.5-61.416-6.5-91.876 0-177 39.624-236.75 106.5-11.874-22.334-19.25-47.416-19.25-74.5 0-88.376 71.624-160 160-160zM800 896c-34.25 0-65.832-11-91.876-29.334-46.956 56.584-116.876 93.334-196.124 93.334-79.25 0-149.168-36.75-196.124-93.334-26 18.334-57.626 29.334-91.876 29.334-88.376 0-160-71.624-160-160s71.624-160 160-160c15.5 0 30.124 2.916 44.25 7.082 5.624 1.584 11.334 2.834 16.624 5.042 8.75-17.124 19.75-32.792 31.958-47.5 46.752-56.248 116.292-92.624 195.168-92.624 20.25 0 39.668 2.916 58.5 7.418 21.124 4.998 41.084 12.582 59.668 22.582 46.582 24.75 84.832 63.084 108.914 110.126 18.794-7.75 39.336-12.126 60.918-12.126 88.376 0 160 71.624 160 160s-71.624 160-160 160z"></path>
                </symbol>
                <symbol id="icon-lightning" viewBox="0 0 1024 1024">
                	<title>lightning</title>
                	<path class="path1" d="M800 128c-10.624 0-21.124 0.75-31.584 2.25-59.748-81.416-154.040-130.25-256.416-130.25s-196.624 48.834-256.416 130.25c-10.46-1.5-20.96-2.25-31.584-2.25-123.5 0-224 100.5-224 224s100.5 224 224 224c27.376 0 54.168-5 79.418-14.666 43.082 37.542 94.832 62.582 150.208 73.042l-69.626 69.624 64 64-64 192 192-192-64-64 22-65.998c68.916-4.876 134.25-31.086 186.582-76.668 25.25 9.666 52.042 14.666 79.418 14.666 123.5 0 224-100.5 224-224s-100.5-224-224-224zM800 512c-34.25 0-65.832-11-91.876-29.334-37.876 45.666-91.124 77.25-151.75 88.208l-44.374 5.126c-79.25 0-149.168-36.75-196.124-93.334-26 18.334-57.626 29.334-91.876 29.334-88.376 0-160-71.624-160-160s71.624-160 160-160c21.624 0 42.124 4.416 60.876 12.166 42.458-82.832 127.706-140.166 227.124-140.166s184.668 57.334 227.082 140.166c18.794-7.75 39.336-12.166 60.918-12.166 88.376 0 160 71.624 160 160s-71.624 160-160 160z"></path>
                </symbol>
                <symbol id="icon-rainy" viewBox="0 0 1024 1024">
                	<title>rainy</title>
                	<path class="path1" d="M800 128c-10.624 0-21.124 0.75-31.584 2.25-59.748-81.416-154.040-130.25-256.416-130.25s-196.624 48.834-256.416 130.25c-10.46-1.5-20.96-2.25-31.584-2.25-123.5 0-224 100.5-224 224s100.5 224 224 224c27.376 0 54.168-5 79.418-14.666 57.914 50.5 131.582 78.666 208.582 78.666 77.084 0 150.666-28.166 208.582-78.666 25.25 9.666 52.042 14.666 79.418 14.666 123.5 0 224-100.5 224-224s-100.5-224-224-224zM800 512c-34.25 0-65.832-11-91.876-29.334-46.956 56.584-116.876 93.334-196.124 93.334-79.25 0-149.168-36.75-196.124-93.334-26 18.334-57.626 29.334-91.876 29.334-88.376 0-160-71.624-160-160s71.624-160 160-160c21.624 0 42.124 4.416 60.876 12.166 42.458-82.832 127.706-140.166 227.124-140.166s184.668 57.334 227.082 140.166c18.794-7.75 39.336-12.166 60.918-12.166 88.376 0 160 71.624 160 160s-71.624 160-160 160zM450 960c0 35.376 28.624 64 64 64s64-28.624 64-64-64-128-64-128-64 92.624-64 128zM704 896c0 35.376 28.624 64 64 64s64-28.624 64-64-64-128-64-128-64 92.624-64 128zM192 768c0 35.376 28.624 64 64 64s64-28.624 64-64-64-128-64-128-64 92.624-64 128z"></path>
                </symbol>
                <symbol id="icon-snowy" viewBox="0 0 1024 1024">
                	<title>snowy</title>
                	<path class="path1" d="M652.084 887.376l-36-20.752c1.084-6.248 1.916-12.622 1.916-19.248 0-6.624-0.832-13-2-19.25l36.084-20.792c16.834-9.834 22.582-31.458 12.916-48.208-9.752-16.958-31.334-22.75-48.25-13l-36.376 21c-9.752-8.292-20.75-14.792-33-19.208v-41.792c0-19.542-15.876-35.376-35.376-35.376s-35.332 15.834-35.332 35.376v41.75c-12.252 4.376-23.292 10.958-33.042 19.25l-36.292-21c-16.958-9.75-38.584-4-48.334 12.958-9.75 16.834-3.876 38.5 13 48.252l35.918 20.75c-1.168 6.292-1.918 12.668-1.918 19.292 0 6.626 0.75 13 1.918 19.248l-35.916 20.75c-16.918 9.75-22.75 31.5-13 48.376s31.376 22.624 48.25 12.876l36.334-20.876c9.748 8.25 20.792 14.75 33.084 19.124v41.876c0 19.498 15.832 35.248 35.332 35.248s35.376-15.75 35.376-35.248v-41.876c12.25-4.376 23.376-10.876 33.042-19.25l36.334 21c16.916 9.75 38.498 4 48.25-12.876 9.748-16.874 3.998-38.5-12.918-48.374zM512 882.75c-19.5 0-35.376-15.876-35.376-35.376s15.876-35.292 35.376-35.292 35.334 15.792 35.334 35.292-15.834 35.376-35.334 35.376zM948.332 792.5l-24.166-6.416c-0.582-7.666-2.416-14.958-5.792-21.958l17.542-17.542c8.25-8.25 8.208-21.584 0-29.708-8.166-8.208-21.416-8.25-29.666 0l-17.582 17.5c-6.918-3.25-14.292-5.124-21.918-5.75l-6.418-24.124c-2.998-11.166-14.5-17.876-25.748-14.876-11.208 3.042-17.75 14.542-14.834 25.75l6.418 23.792c-3.168 2.168-6.168 4.584-9 7.334-2.75 2.834-5.084 5.832-7.252 8.918l-23.792-6.418c-11.208-2.998-22.792 3.752-25.792 14.876-2.998 11.25 3.752 22.708 14.834 25.75l24 6.458c0.668 7.542 2.584 14.916 5.958 21.918l-17.624 17.624c-8.166 8.208-8.124 21.458 0.084 29.624 8.166 8.166 21.416 8.25 29.584 0.084l17.664-17.666c6.918 3.414 14.336 5.332 22.002 5.914l6.332 24.042c3.084 11.208 14.5 17.876 25.752 14.876 11.166-3 17.914-14.498 14.916-25.834l-6.418-23.792c3-2.124 6.084-4.5 8.918-7.25 2.75-2.792 5.084-5.876 7.248-8.958l23.834 6.418c11.208 3 22.75-3.708 25.708-14.834 3-11.17-3.624-22.668-14.792-25.752zM876.624 805.876c-8.25 8.25-21.542 8.208-29.75 0-8.124-8.124-8.208-21.458 0-29.708 8.208-8.166 21.542-8.166 29.75 0 8.126 8.208 8.126 21.582 0 29.708zM237.876 685l-23.75 6.376c-2.208-3-4.5-6.042-7.292-8.876-2.832-2.75-5.832-5.124-8.958-7.25l6.376-23.876c3-11.208-3.668-22.75-14.75-25.708-11.25-3-22.75 3.668-25.75 14.834l-6.5 24.124c-7.624 0.624-14.916 2.5-21.876 5.792l-17.624-17.542c-8.25-8.25-21.5-8.208-29.668 0-8.208 8.208-8.208 21.5 0 29.708l17.542 17.542c-3.292 7-5.208 14.376-5.792 21.958l-24.084 6.416c-11.25 3.084-17.918 14.5-14.916 25.75 3.042 11.166 14.542 17.75 25.792 14.834l23.75-6.46c2.124 3.208 4.5 6.21 7.376 9.002 2.75 2.75 5.75 5.208 8.876 7.25l-6.376 23.792c-3 11.25 3.668 22.834 14.832 25.834 11.252 3 22.668-3.666 25.668-14.876l6.5-24c7.624-0.624 15-2.542 22-5.876l17.582 17.584c8.168 8.248 21.418 8.082 29.668-0.084 8.124-8.124 8.25-21.416 0-29.624l-17.624-17.624c3.376-6.92 5.376-14.376 5.876-22.002l24.124-6.376c11.124-3.042 17.792-14.5 14.792-25.75-3.002-11.12-14.502-17.788-25.794-14.872zM177.124 741.916c-8.208 8.208-21.5 8.208-29.75 0-8.124-8.166-8.124-21.542 0-29.666 8.25-8.166 21.542-8.166 29.75 0s8.126 21.5 0 29.666zM1024 352c0-123.5-100.5-224-224-224-10.624 0-21.124 0.75-31.584 2.25-59.748-81.416-154.040-130.25-256.416-130.25s-196.624 48.834-256.416 130.25c-10.46-1.5-20.96-2.25-31.584-2.25-123.5 0-224 100.5-224 224s100.5 224 224 224c27.376 0 54.168-5 79.418-14.666 57.914 50.5 131.582 78.666 208.582 78.666 77.084 0 150.666-28.166 208.582-78.666 25.25 9.666 52.042 14.666 79.418 14.666 123.5 0 224-100.5 224-224zM708.124 482.666c-46.956 56.584-116.876 93.334-196.124 93.334-79.25 0-149.168-36.75-196.124-93.334-26 18.334-57.626 29.334-91.876 29.334-88.376 0-160-71.624-160-160s71.624-160 160-160c21.624 0 42.124 4.416 60.876 12.166 42.458-82.832 127.706-140.166 227.124-140.166s184.668 57.334 227.082 140.166c18.794-7.75 39.336-12.166 60.918-12.166 88.376 0 160 71.624 160 160s-71.624 160-160 160c-34.25 0-65.832-11-91.876-29.334z"></path>
                </symbol>
                <symbol id="icon-none" viewBox="0 0 1024 1024">
                	<title>none</title>
                	<path class="path1" d="M318.188 557.292h-2.084l-67.042-102.376-81.876-120.874h-63.5v352.79h70.124v-222.208h3.042l58.208 89.084 89.376 133.124h63.876v-352.79h-70.124v223.25zM412.938 708.332h51.668l129.582-392.664h-52.25l-129 392.664zM797.438 334.042h-71.666l-123.958 352.79h74.75l23.042-72.75h122.918l21.498 72.75h76.292l-122.876-352.79zM718.562 555.25l14.292-46.584 27.208-91.664h2l27.708 93.208 13.792 45.042h-85z"></path>
                </symbol>
                </defs>
              </svg>
              <div sf-weather-card current-user="ctrl.current_user"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
