!function(){"use strict";var e=angular.module("ngCoolNoti",[]);e.provider("ngCoolNoti",function(){this.defaults={container:"body",position:"top-right",animation:"jelly",timeout:5e3,showClose:!0,hasUserAvatar:!1,avatar_url:"",type:"success",message:"Is this pretty awesome? Love ya all :)"};this.getDefaults=function(){return this.defaults},this.setDefaults=function(e){angular.extend(this.defaults,e)},this.$get=["$document","$timeout",function(e,t){var n=this,o=e.find("body"),r=function(e){var t="cool-noti-"+e.position,n="cool-noti-"+e.animation,o="cool-noti-"+e.type,r="ng-cool-noti "+o+" "+t+" "+n,i="";return i+='<div class="'+r+'"><div class="cool-noti-inner">',e.hasUserAvatar?(i+='<div class="cool-noti-avatar"><img src="'+e.avatar_url+'" /></div>',i+='<div class="cool-noti-message cool-noti-avatar-message">'+e.message+"</div>"):i+='<div class="cool-noti-message">'+e.message+"</div>",e.showClose&&(i+='<i class="fa fa-close cool-noti-close"></i>'),i+="</div></div>"},i={};return i.create=function(i){i=i||{};var a=angular.copy(n.defaults);angular.extend(a,i),a.container&&(o=e.find(a.container));var s=r(a),c=angular.element(s);if(angular.element(o).append(c),c.addClass("cool-noti-show"),t(function(){c.removeClass("cool-noti-show").addClass("cool-noti-hide"),t(function(){c.remove()},1e3)},a.timeout),a.showClose){var l=angular.element(c.find("i"));l.on("click",function(e){c.removeClass("cool-noti-show").addClass("cool-noti-hide"),t(function(){c.remove()},1e3)})}},i}]})}(),function(){"use strict";var e=angular.module("ngCoolVideo",[]);e.directive("ngCoolVideo",["$sce","$timeout",function(e,t){return{restrict:"AE",scope:{source:"=source"},transclude:!0,replace:!0,template:'<div class="ng-cool-video"><div class="ng-cool-video-container"><video width="100%"></video><div class="ng-cool-video-controls"><div class="ncv-actions"><i class="ti-control-backward" ng-click="playBackward()"></i><i class="ti-control-pause" ng-click="pause()" ng-show="isPlaying"></i><i class="ti-control-play" ng-click="play()" ng-show="!isPlaying"></i><i class="ti-control-forward" ng-click="playForward()"></i></div><div class="ncv-progress"><progress class="ncv-progress-bar" max="100" value="{{progressValue}}" ng-click="skipProgress($event)"></progress></div><div class="ncv-current-time"><span class="ncv-video-duration">{{playingTime}}</span></div><div class="ncv-mute"><i class="ti-volume" ng-click="toggleVolume()"></i></div><div class="ncv-sound-range"><input class="ncv-volume" type="range" max="10" min="0" value="5" ng-model="video.volume"></div></div></div></div></div>',controller:["$scope","$element",function(e,t){if(!e.source||!e.source.src)throw new Error("Not set source object, check the api :)");var n=(t[0].querySelector(".ng-cool-video-container"),t[0].querySelector("video")),o=t[0].querySelector(".ncv-progress progress"),r=t[0].querySelector(".ncv-sound-range input[type='range']"),i=(t[0].querySelector(".ng-cool-video-controls"),angular.element(n)),a=(angular.element(o),function(){var e=parseInt(n.currentTime%60),t=parseInt(n.currentTime/60%60);return e=("0"+e).slice(-2),t=("0"+t).slice(-2),t+":"+e}),s=function(){var e=100/n.duration*n.currentTime;return e};e.init=function(){e.playingTime="00:00",e.progressValue=0,e.isPlaying=!1,e.isMuted=!1,e.jumpInterval=10,e.setInterface(),e.addEvents()},e.setInterface=function(){var t=angular.isArray(e.source.src);if(t){var o="";angular.forEach(e.source.src,function(e){o+='<source src="'+e.url+'" type="'+e.type+'">'}),i.append(angular.element(o))}else i.attr("src",e.source.src);e.source.poster&&i.attr("poster",e.source.poster),n.preload=!1,e.source.config&&(e.source.config.autoplay&&(n.autoplay=!0),e.source.config.loop&&(n.loop=!0),e.source.config.preload&&(n.preload=!0))},e.togglePlay=function(){e.isPlaying?n.pause():n.play(),e.isPlaying=!e.isPlaying},e.play=function(){n.play(),e.isPlaying=!0},e.pause=function(){n.pause(),e.isPlaying=!1},e.toggleVolume=function(){n.muted=!n.muted,e.isMuted=!e.isMuted},e.volumeOff=function(){n.muted=!0,e.isMuted=!0},e.volumeOn=function(){n.muted=!1,e.isMuted=!1},e.playBackward=function(){var t=n.currentTime-e.jumpInterval;n.currentTime=0>t?0:t,e.playingTime=a(),e.progressValue=s()},e.playForward=function(){var t=n.currentTime+e.jumpInterval;n.currentTime=t>n.duration?n.duration:t,e.playingTime=a(),e.progressValue=s()},e.skipProgress=function(t){var o=t.target,r=o.getBoundingClientRect(),i=0;i=t.offsetX?t.offsetX:t.pageX-r.x;var c=i/o.offsetWidth;n.currentTime=c*n.duration,e.playingTime=a(),e.progressValue=s()},e.addEvents=function(){n.addEventListener("timeupdate",function(){e.playingTime=a(),e.progressValue=s(),e.$apply()},!1),r.addEventListener("change",function(){n.volume=parseFloat(this.value/10)},!1)}}],link:function(e,t,n){e.init()}}}])}(),function(){"use strict";angular.module("ngCoolAudio",[]).directive("ngCoolAudio",["$timeout","$sce",function(e,t){return{restrict:"AE",scope:{source:"=source"},replace:!0,template:'<div class="ng-cool-audio-container"><audio>Your browser seems to be upgraded! :)</audio><div class="ng-cool-audio-preview"><div class="ncv-audio-left"><div class="ncv-img-container"><div class="ncv-audio-cover" style="background-image: url(\'{{audio.cover}}\')"></div></div></div><div class="ncv-audio-right"><div class="ncv-audio-right-top"><div class="ncv-header"><div class="ncv-header-title">{{audio.author}}</div><div class="ncv-header-subtitle">{{audio.name}}</div></div></div><div class="ncv-audio-right-bottom"><div class="ncv-audio-controls"><i class="ti-control-backward" ng-click="playBackward()"></i><i class="ti-control-pause" ng-click="pause()" ng-show="isPlaying"></i><i class="ti-control-play" ng-click="play()" ng-show="!isPlaying"></i><i class="ti-control-forward" ng-click="playForward()"></i></div><div class="ncv-audio-progress"><progress class="ncv-audio-progress-bar" ng-click="skipProgress($event)" max="100" value="{{progressValue}}"></progress></div><div class="ncv-time"><span>{{currentTime}}</span></div></div></div></div></div>',controller:["$scope","$element",function(e,t){if(!e.source||!e.source.audio)throw new Error("Source seems not to config right!");var n=(t[0].querySelector(".ng-cool-audio-container"),t[0].querySelector("audio")),o=angular.element(n);e.audio={};var r=function(){var e=parseInt(n.currentTime%60),t=parseInt(n.currentTime/60%60);return e=("0"+e).slice(-2),t=("0"+t).slice(-2),t+":"+e},i=function(){var e=100/n.duration*n.currentTime;return e},a=function(t){if(!t.src)throw new Error("Not found src in your audio config");o.attr("src",t.src),e.audio.cover=t.cover,e.audio.author=t.author,e.audio.name=t.name};e.currentTrack=0,e.jumpInterval=10,e.init=function(){e.currentTime="00:00",e.progressValue=0,e.isPlaying=!1,e.isMuted=!1,e.setInterface(e.currentTrack),e.addEvents()},e.setInterface=function(t){var o=angular.isArray(e.source.audio);o?(e.audioCollection=e.source.audio,a(e.audioCollection[t])):a(e.source.audio),e.source.config&&(e.source.config.autoplay&&(n.autoplay=!0),e.source.config.loop&&(n.loop=!0))},e.play=function(){n.play(),e.isPlaying=!0},e.pause=function(){n.pause(),e.isPlaying=!1},e.volumeOn=function(){n.muted=!1,e.isMuted=!1},e.volumeOff=function(){n.muted=!0,e.isMuted=!0},e.playBackward=function(){if(e.audioCollection&&e.audioCollection.length>0)e.currentTrack-=1,e.currentTrack<0&&(e.currentTrack=e.audioCollection.length-1),e.init(),e.play();else{var t=n.currentTime-e.jumpInterval;n.currentTime=0>t?0:t,e.currentTime=r(),e.progressValue=i()}},e.playForward=function(){if(e.audioCollection&&e.audioCollection.length>0)e.currentTrack+=1,e.currentTrack>e.audioCollection.length-1&&(e.currentTrack=0),e.init(),e.play();else{var t=n.currentTime+e.jumpInterval;n.currentTime=t>n.duration?n.duration:t,e.currentTime=r(),e.progressValue=i()}},e.skipProgress=function(t){var o=t.target,a=o.getBoundingClientRect(),s=0;s=t.offsetX?t.offsetX:t.pageX-a.x;var c=s/o.offsetWidth;n.currentTime=c*n.duration,e.currentTime=r(),e.progressValue=i()},e.addEvents=function(){n.addEventListener("timeupdate",function(){e.currentTime=r(),e.progressValue=i(),e.$apply()},!1),n.addEventListener("ended",function(){e.audioCollection&&e.audioCollection.length>0&&e.playForward()})}}],link:function(e,t,n){e.init()}}}])}(),function(){"use strict";var e=angular.module("ngCoolComponents",[]);e.directive("ngCoolTooltip",["$document","$timeout",function(e,t){return{restrict:"AE",link:function(n,o,r){var i=e.find("body")[0],a=o[0],s=angular.element(i),c=function(e){var t="";return t+='<div class="ng-cool-tooltip '+e.effect+'">',t+='<div class="ng-cool-arrow '+e.position+'"></div>',t+='<div class="ng-cool-tooltip-content">',t+=e.content,t+="</div>",t+="</div>"},l={};l.effect=r.effect||"fade",l.position=r.position||"top",r.$observe("ngCoolTooltip",function(e){l.content=e;var t=c(l),n=angular.element(t);l.template=n}),a.addEventListener("mouseover",function(){t(function(){s.append(l.template),l.template.css("position","fixed");var e=a.getBoundingClientRect(),t=l.template[0].getBoundingClientRect(),n={};"top"===l.position&&(n.left=e.left+e.width/2-t.width/2,n.top=e.top-t.height-8),"bottom"===l.position&&(n.left=e.left+e.width/2-t.width/2,n.top=e.top+e.height+3),l.template.css("left",n.left+"px"),l.template.css("top",n.top+"px"),l.template.removeClass("out").addClass("in")},300)},!1),a.addEventListener("mouseout",function(){l.template.removeClass("in").addClass("out"),t(function(){l.template.remove()},300)},!1)}}}]),e.directive("ngCoolPopover",["$document","$timeout","$compile",function(e,t,n){return{restrict:"AE",scope:{source:"=source"},link:function(o,r,i){var a=e[0],s=e.find("body")[0],c=r[0],l=angular.element(s),u={},d=i.position||"top",f=i.effect||"slideInUp",m=i.ngCoolPopover;u.position=d,u.effect=f,u.id=m;var g=function(e){var t="";return t+='<div class="ng-cool-popover '+e.effect+'" id="ng-cool-popover-'+e.id+'">',t+='<div class="ng-cool-popover-inner">',angular.isString(o.source)&&(t+='<div class="ng-cool-popover-content">'+o.source+"</div>"),angular.isArray(o.source)&&(t+='<ul class="notification-list popover-notilist">',t+='<li class="popover-noti-item" ng-repeat="item in source">',t+='<div class="noti-avatar">',t+='<a ui-sref="user({name: item.creator.name})" ng-href="/#/{{item.creator.name}}">',t+='<img ng-src="{{item.creator.avatar}}" class="creator-avatar img-responsive img-circle">',t+="</a>",t+="</div>",t+='<a ui-sref="message" ng-href="messages" class="popover-item-content">',t+="{{item.content}}",t+='<div class="noti-time">{{item.createdAt | date: "yyyy-MM-dd"}}</div>',t+="</a>",t+="</li>",t+="</ul>",t+='<div class="noti-more"><a ng-href="messages">More Notifications</a></div>'),t+="</div>",t+='<div class="ng-cool-popover-arrow"></div>',t+="</div>"},p=function(){var e=(a.querySelector(".ng-cool-popover"),angular.element(u));t(function(){e.remove()})};c.addEventListener("click",function(e){var r=a.querySelector("#ng-cool-popover-"+u.id);if(r)return void angular.element(r).remove();p();var i=g(u),s=n(i)(o);t(function(){l.append(s);{var e=a.querySelector("#ng-cool-popover-"+u.id),n=angular.element(e),o=c.getBoundingClientRect();e.getBoundingClientRect()}n.css("position","absolute");var r=o.top+o.height+10,i=o.left+o.width/2-30;n.css("top",r+"px"),n.css("left",i+"px"),e.addEventListener("click",function(e){e.stopPropagation()}),a.addEventListener("click",function(){t(function(){n.remove()})})})},!1)}}}]),e.directive("sfUserCardPopover",["$http","$q","$timeout","$document","$compile",function(e,t,n,o,r){return{restrict:"AE",scope:{user:"=user",current_user:"=currentUser"},link:function(t,i,a){var s=o.find("body"),c=null;$(i[0]).on("mouseover",function(o){var i=$(".user-card-popover");i&&i.remove(),c||(c=n(function(){c=null;var i=e.get("template/partials/user-card-popover.html");i.then(function(e){var i=r(e.data)(t);n(function(){s.append(angular.element(i));var e=o.target,t=$(e).offset(),n=$(".user-card-popover");n.css("top",t.top+10+"px"),n.css("left",t.left+48+"px")})})},500))}),$(i[0]).on("mouseleave",function(){if(c)n.cancel(c),c=null;else{var e=$(".user-card-popover");e&&(e.addClass("out"),n(function(){e.remove()},500))}})}}}])}(),function(){"use strict";if(!ID3)throw new Error("no ID3 dependency");angular.module("ngAudioTag",[]).factory("ngAudioTag",["$http","$q",function(e,t){var n=function(e){var n=t.defer();return ID3.loadTags(e.name,function(){var t=ID3.getAllTags(e.name);n.resolve(t)},{tags:["artist","title","album","year","comment","track","genre","lyrics","picture"],dataReader:FileAPIReader(e)}),n.promise};return{getTag:n}}])}(),function(){"use strict";angular.module("ngGeo",[]).factory("ngGeo",["$http","$q","$timeout",function(e,t,n){if(!AMap)throw new Error("no gaode map set!");var o={SUN:'<svg class="icon icon-sun"><use xlink:href="#icon-sun"></use></svg>',CLOUNDY:'<svg class="icon icon-cloudy"><use xlink:href="#icon-cloudy"></use></svg>',RAINY:'<svg class="icon icon-rainy"><use xlink:href="#icon-rainy"></use></svg>',LIGHTING:'<svg class="icon icon-lightning"><use xlink:href="#icon-lightning"></use></svg>',SNOWY:'<svg class="icon icon-snowy"><use xlink:href="#icon-snowy"></use></svg>',NONE:'<svg class="icon icon-none"><use xlink:href="#icon-none"></use></svg>'},r=function(){var e=t.defer();return AMap.service(["AMap.CitySearch"],function(){var t=new AMap.CitySearch;t.getLocalCity(function(t,n){"complete"===t&&"OK"===n.info?e.resolve(n):e.reject("No data can get!")})}),e.promise},i=function(e,t){var n=new AMap.Map(t,{resizeEnable:!0});n.setCity(e)},a=function(e){var n=t.defer();return AMap.service("AMap.Weather",function(){var t=new AMap.Weather;t.getLive(e,function(e,t){e?n.reject(e):(t.icon=t.weather.indexOf("晴")>-1?o.SUN:t.weather.indexOf("雨")>-1?o.RAINY:t.weather.indexOf("阴")>-1?o.CLOUNDY:t.weather.indexOf("雪")>-1?o.SNOWY:t.weather.indexOf("电")>-1?o.LIGHTING:o.NONE,n.resolve(t))})}),n.promise};return{getLocationByIP:r,initMapByCity:i,getWeatherByCity:a}}])}(),function(){angular.module("showfieApp",["ngSanitize","ui.router","angularFileUpload","ngTagsInput","mentio","ngCoolNoti","ngCoolVideo","ngCoolAudio","ngCoolComponents","ngAudioTag","ngGeo"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("welcome",{url:"/",templateUrl:"template/welcome.html"}).state("signup",{url:"/signup",templateUrl:"template/signup.html"}).state("login",{url:"/login",templateUrl:"template/login.html"}).state("forgetpass",{url:"/forgetpass",templateUrl:"template/forgetpass.html"}).state("404",{templateUrl:"template/404.html"}).state("403",{url:"/forbidden",templateUrl:"template/403.html"}).state("home",{url:"/home",templateUrl:"template/home.html"}).state("explore",{url:"/explore",templateUrl:"template/explore.html"}).state("messages",{url:"/messages",templateUrl:"template/messages.html"}).state("user",{url:"/user/:name",templateUrl:"template/user_page.html"}).state("followers",{url:"/:name/followers",templateUrl:"template/user_followers.html"}).state("followees",{url:"/:name/followees",templateUrl:"template/user_followees.html"}).state("setting",{url:"/setting",templateUrl:"template/setting.html"}).state("bookmarks",{url:"/bookmarks",templateUrl:"template/bookmarks.html"}).state("feed",{url:"/feed/:id",templateUrl:"template/feed-page.html"})}])}(),function(){angular.module("showfieApp").factory("FeedService",["$http","$q",function(e,t){function n(n){var o=t.defer();return e({url:"/feed/create",method:"POST",data:n}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function o(n){var o=t.defer();return e({method:"GET",url:"/feed/getfeeds",params:{after:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function r(n){var o=t.defer();return e({method:"POST",url:"/feed/remove_file",data:{fileId:n.fileId,key:n.key}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function i(n){var o=t.defer();return e({method:"POST",url:"/feed/toggle_like",data:{feedId:n._id}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function a(n,o){var r=t.defer();return e({method:"POST",url:"/feed/add_comment",data:{feedId:n,content:o}}).success(function(e,t,n,o){r.resolve(e)}).error(function(e,t,n,o){r.reject(e)}),r.promise}function s(n){var o=t.defer();return e({methond:"GET",url:"/feed/detail",params:{feedId:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function c(n){var o=t.defer();return e({method:"GET",url:"/feed/user_feeds",params:{userId:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function l(n){var o=t.defer();return e({method:"POST",url:"/feed/delete",data:{feedId:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function u(n,o){var r=t.defer();return e({method:"POST",url:"/feed/delete_comment",data:{feedId:n,commentId:o}}).success(function(e,t,n,o){r.resolve(e)}).error(function(e,t,n,o){r.reject(e)}),r.promise}function d(n,o){var r=t.defer();return e({method:"GET",url:"/feed/more_comments",params:{feedId:n,skip:o}}).success(function(e,t,n,o){r.resolve(e)}).error(function(e,t,n,o){r.reject(e)}),r.promise}return{create:n,getFeeds:o,removeFile:r,toggleLike:i,addComment:a,getFeedDetail:s,getFeedsByUser:c,deleteFeed:l,deleteComment:u,loadMoreComments:d}}])}(),function(){angular.module("showfieApp").factory("UserService",["$http","$q","$state","$timeout",function(e,t,n,o){function r(n){var o=t.defer();return e({method:"POST",url:"/user/new",data:{name:n.name,email:n.email,password:n.password}}).success(function(e,t,n,r){w=e.new_user,o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function i(){var n=t.defer();return w?n.resolve(w):e({method:"GET",url:"/user/current"}).success(function(e,t,o,r){n.resolve(e.user)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function a(n){var o=t.defer();return e({method:"POST",url:"/user/login",data:{email:n.email,password:n.password}}).success(function(e,t,n,r){w=e.user,o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function s(){var n=t.defer();return e({method:"GET",url:"/user/logout"}).success(function(e,t,o,r){w=null,n.resolve(e)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function c(){var n=t.defer();return e({method:"GET",url:"/user/info"}).success(function(e,t,o,r){n.resolve(e)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function l(n){var o=t.defer();return e({method:"POST",url:"/user/update_info",data:{info:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function u(n){var o=t.defer();return e({method:"GET",url:"/user/info_name",params:{name:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function d(){var n=t.defer();return e({method:"GET",url:"/user/followers_at"}).success(function(e,t,o,r){n.resolve(e)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function f(n){var o=t.defer();return e({method:"POST",url:"/user/follow",data:{followId:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function m(n){var o=t.defer();return e({method:"POST",url:"/user/unfollow",data:{unfollowId:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function g(){var n=t.defer();return e({method:"GET",url:"/user/notifications"}).success(function(e,t,o,r){n.resolve(e)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function p(){var n=t.defer();return e({method:"POST",url:"/user/mark_notis"}).success(function(e,t,o,r){n.resolve(e)}).error(function(e,t,o,r){n.reject(e)}),n.promise}function v(n){var o=t.defer();return e({method:"GET",url:"/user/followers",params:{name:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}function h(n){var o=t.defer();return e({method:"GET",url:"/user/followees",params:{name:n}}).success(function(e,t,n,r){o.resolve(e)}).error(function(e,t,n,r){o.reject(e)}),o.promise}var w;return{signUp:r,currentUser:i,login:a,logout:s,getUserInfo:c,updateInfo:l,getUserInfoByName:u,getUserFollowersForAt:d,follow:f,unfollow:m,getNotifications:g,markAllNoti:p,getUserFollowers:v,getUserFollowees:h}}])}(),function(){"use strict";angular.module("showfieApp").filter("sinceTime",function(){return function(e){var t=new Date(e),n=(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours()),o=t.getMinutes(),r=new Date,i=-(t.getTime()-r.getTime()),a=[1e3,6e4,36e5,864e5];if(i<a[3]){if(i>0&&i<a[1])return Math.floor(i/a[0])+" secs ago";if(i>a[1]&&i<a[2])return Math.floor(i/a[1])+" mins ago";if(i>a[2]&&i<a[3])return Math.floor(i/a[2])+" hours ago"}var n=("0"+n).slice(-2),o=("0"+o).slice(-2);return n+":"+o}}).filter("formatCount",function(){return function(e){var e=parseInt(e,10);return e>=1e4?(e/=1e3,e+"k"):e}}).filter("overflowFormat",function(){return function(e){if(e&&e.length>0){for(var t=0,n="",o=0;o<e.length;o++){var r=e.charCodeAt(o);if(n+=e[o],r>=1&&126>=r||r>=65376&&65439>=r?t++:t+=2,t>90)return n+"..."}return n}return e}})}(),function(){"use strict";angular.module("showfieApp").directive("sfCreateFeed",["$document","$timeout","$http","$compile",function(e,t,n,o){return{restrict:"AE",scope:{current_user:"=currentUser",usersAt:"=usersAt"},link:function(r,i,a){var s=e.find("body")[0],c=angular.element(s);i.on("click",function(){var e=n.get("template/partials/create-bar.html");e.success(function(e){var n=o(e)(r);t(function(){c.append(n),c.addClass("create-open");var e=$(".sf-create-main");e.addClass("jelley-in"),t(function(){e.removeClass("jelley-in")},1200)})})})}}}]).directive("sfUploadFeed",["$document","$timeout","$http","$rootScope","$q","$upload","ngCoolNoti","FeedService","ngAudioTag","ngGeo",function(e,t,n,o,r,i,a,s,c,l){return{restrict:"AE",controller:["$scope","$element",function(e,t){e.mediaUploading=!1,e.mediaUploaded=!1,e.canPosted=!1,e.upload_funs=[],e.fileReaderSupported=null!=window.FileReader&&(null==window.FileAPI||0!=FileAPI.html5),e.$watch("file_count",function(t){e.selectedFiles&&e.selectedFiles.length&&(e.canPosted=t===e.selectedFiles.length?!0:!1)}),e.$watch("feedWords",function(t){e.canPosted=t&&""!==t?!0:!1}),e.upload=function(t,n){if(e.selectedFiles=t,e.file_count=0,!(t&&t.length>0))return!1;if("image"===n){if(t&&t.length>3)return a.create({message:"Images length should not be more than 3",position:"top-right",animation:"jelly",type:"warning"}),!1;e.images=t}"audio"===n&&(e.audio=t),"video"===n&&(e.video=t),("audio"===n||"video"===n)&&(e.mediaUploading=!0),"audio"===n?c.getTag(t[0]).then(function(o){var r="";if("picture"in o)for(var s=o.picture,c=0;c<s.data.length;c++)r+=String.fromCharCode(s.data[c]);var l={};l.category=n,o.title&&(l.title=o.title),o.comment&&o.comment.text&&(l.comment=o.comment.text.replace("music:","")),o.artist&&(l.artist=o.artist),l.audio_data=window.btoa(r),angular.forEach(t,function(t){if(t){var o=i.upload({url:"/feed/upload_file",file:t,fields:l}).success(function(o,r,i,s){"fail"===o.status?a.create({message:o.msg,position:"top-right",animation:"jelly",type:"danger"}):(e.file_count+=1,t.url=o.file_info.url,t.fileId=o.file_info.fileId,t.key=o.file_info.key,("audio"===n||"video"===n)&&(e.mediaUploaded=!0,e.media=t))});e.upload_funs.push(o)}})}):angular.forEach(t,function(t){if(t){var o=i.upload({url:"/feed/upload_file",file:t,fields:{category:n}}).success(function(o,r,i,s){"fail"===o.status?a.create({message:o.msg,position:"top-right",animation:"jelly",type:"danger"}):(e.file_count+=1,t.url=o.file_info.url,t.fileId=o.file_info.fileId,t.key=o.file_info.key,("audio"===n||"video"===n)&&(e.mediaUploaded=!0,e.media=t))});e.upload_funs.push(o)}})},e.removeImage=function(t){s.removeFile(e.images[t]).then(function(n){e.images=e.images.filter(function(e,n){return n!==t})},function(e){console.log(e)})},e.removeMedia=function(t){s.removeFile(t).then(function(n){t.type.indexOf("audio")>-1&&(e.audio=null),t.type.indexOf("video")>-1&&(e.video=null),e.mediaUploading=!1,e.mediaUploaded=!1,e.media=null},function(e){console.log(e)})},e.validateFile=function(t,n){return t.size>50485760?(a.create({message:"Your file size too large!",position:"top-right",animation:"jelly",type:"warning"}),"image"===n&&(e.images=null),"audio"===n&&(e.audio=null),"video"===n&&(e.video=null),!1):void 0},e.getLocation=function(){l.getLocationByIP().then(function(t){e.location=""!==t.city?t.city:"Location Not Found"},function(e){console.log(e)})}}],link:function(n,o,r){var i=function(){var e=!1;return n.feedWords&&""!==n.feedWords&&(e=!0),n.images&&n.images.length>0&&(n.category="image",n.share_files=n.images.map(function(e){var t={fileId:e.fileId,url:e.url,caption:e.caption||"",key:e.key};return t}),e=!0),n.audio&&n.audio.length>0&&(n.category="audio",n.share_files=n.audio.map(function(e){return{fileId:e.fileId,url:e.url,key:e.key}}),e=!0),n.video&&n.video.length>0&&(n.category="video",n.share_files=n.video.map(function(e){return{fileId:e.fileId,url:e.url,key:e.key}}),e=!0),e};n.postShare=function(){if(!i())return a.create({message:"You add nothing to share :(",position:"top-right",animation:"jelly",type:"danger"}),!1;var e={text:n.feedWords,category:n.category,share_files:n.share_files,tags:n.tags,location:n.location};s.create(e).then(function(e){n.cancel(!0),n.$emit("feed:new",{new_feed_id:e.new_feed_id})},function(e){console.log(e)})},n.cancel=function(r){r||(n.upload_funs.forEach(function(e){e.abort()}),i(),n.share_files&&n.share_files.length>0&&n.share_files.forEach(function(e){e.fileId&&e.key&&s.removeFile(e).then(function(e){console.log(e)})})),$(o).find(".sf-create-main").addClass("jelley-out"),t(function(){n.spinnerShow=!1,n.mediaReady=!1,n.mediaUploading=!1,n.mediaUploaded=!1,n.file_count=null,n.selectedFiles=null,n.canPosted=!1,n.images=null,n.audio=null,n.video=null,n.category=null,n.share_files=null,n.feedWords="",n.location=null,n.tags=null,o.remove(),e.find("body").removeClass("create-open")},950)}}}}]).directive("sfFeedDetailShow",["$document","$compile","$http","$q","$timeout",function(e,t,n,o,r){return{restrict:"AE",scope:{feedId:"=feedId",usersAt:"=usersAt",current_user:"=currentUser"},link:function(i,a,s){var c=e.find("body");s.$observe("currentImageIndex",function(e){e&&(i.current_image_index=parseInt(e,10))}),a.on("click",function(){var e=[],a=n({method:"GET",url:"/feed/detail",params:{feedId:i.feedId}}),s=n.get("template/partials/feed-detail.html");e.push(a),e.push(s),o.all(e).then(function(e){if(e&&2===e.length){i.feed=e[0].data;var n=t(e[1].data)(i);r(function(){c.append(angular.element(n));c[0].querySelector(".sf-feed-detail");c.addClass("sf-feed-detail-open"),$(".feed-detail-container").addClass("in")})}},function(e){console.log(e)})})}}}]).directive("sfFeedDetail",["$document","$timeout","FeedService","ngCoolNoti",function(e,t,n,o){return{restrict:"AE",link:function(n,o,r){var i=e.find("body");n.closeFeedDetail=function(){$(".feed-detail-container").removeClass("in").addClass("out"),t(function(){o.remove(),i.removeClass("sf-feed-detail-open")},1e3)}}}}]).directive("sfFeedAddComment",["$document","$timeout","FeedService","UserService",function(e,t,n,o){return{restrict:"AE",scope:{feed:"=feed",usersAt:"=usersAt"},transclude:!0,template:'<div class="feed-add-comment"><div class="feed-add-comment-inner"><form class="comment-form"><input type="text" class="form-control" placeholder="Add a comment" mentio mentio-items="usersAt" ng-model="commentWord"></form></div></div>',link:function(e,t,o){var r=t[0].querySelector("form.comment-form");r.addEventListener("submit",function(){""!==e.commentWord&&n.addComment(e.feed._id,e.commentWord).then(function(t){if("success"===t.status){var n=t.new_comment;console.log(n),e.feed.comments.unshift(n),e.commentWord=""}},function(e){console.log(e)})})}}}]).directive("sfFeedGallery",["$timeout","$document",function(e,t){return{restrict:"AE",scope:{feed:"=feed",current_image_index:"@currentImageIndex"},template:'<div class="feed-detail-image-preview"><img ng-show="imageReady" ng-src="{{current_image.url}}" alt="Photo"><i class="ti-angle-left" ng-click="preImage()"></i><i class="ti-angle-right" ng-click="nextImage()"></i><div class="image-caption">{{current_image.caption}}</div><div ng-show="!imageReady" ng-include="\'template/spinner.html\'"></div></div>',link:function(t,n,o){t.imageReady=!1;var r=n.find("img"),i=function(n){var o=new Image;o.src=t.current_image.url,o.onload=function(){var i={},a=o.width,s=o.height,c=n.width/a,l=n.height/s;c>=l?(i.width=a*l,i.height=s*l):(i.width=a*c,i.height=s*c),r.css("width",i.width+"px"),r.css("height",i.height+"px"),r.css("margin-top",-i.height/2+"px"),r.css("margin-left",-i.width/2+"px"),e(function(){t.imageReady=!0},300)}};t.current_image=t.feed.attach_files[t.current_image_index],e(function(){var e=t.rect=n[0].getBoundingClientRect();i(e)},500),t.preImage=function(){var e=0;angular.forEach(t.feed.attach_files,function(n,o){n._id===t.current_image._id&&(e=o)}),e-=1,0>e&&(e=t.feed.attach_files.length-1),t.current_image=t.feed.attach_files[e],i(t.rect)},t.nextImage=function(){var e=0;angular.forEach(t.feed.attach_files,function(n,o){n._id===t.current_image._id&&(e=o)}),e+=1,e>t.feed.attach_files.length-1&&(e=0),t.current_image=t.feed.attach_files[e],i(t.rect)}}}}]).directive("sfBannerScrollBlur",["$window",function(e){return{restrict:"AE",link:function(e,t,n){$(window).on("scroll",function(){var e=0;e=$(window).scrollTop()/450,1>=e&&$(t[0]).find(".sf-banner-blur").css("opacity",e)})}}}]).directive("sfFeedAction",["FeedService",function(e){return{restrict:"AE",scope:{feed:"=feed",current_user:"=currentUser"},template:'<div class="feed-actions">                    <a ng-click="toggleFeedLike()" class="toggle-like-link">                      <svg ng-show="!feed.isLike" width="24px" height="23px" viewBox="0 0 24 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="detail" sketch:type="MSArtboardGroup" transform="translate(-617.000000, -373.000000)" fill="#CCCCCC"><path d="M629,395.488889 L627.32,393.777778 C621.08,388.155556 617,384.366667 617,379.722222 C617,375.933333 619.88,373 623.6,373 C625.64,373 627.68,373.977778 629,375.566667 C630.32,373.977778 632.36,373 634.4,373 C638.12,373 641,375.933333 641,379.722222 C641,384.366667 636.92,388.155556 630.68,393.777778 L629,395.488889 L629,395.488889 Z" id="Shape" sketch:type="MSShapeGroup"></path></g></g></svg><svg ng-show="feed.isLike" width="24px" height="23px" viewBox="0 0 24 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="detail" sketch:type="MSArtboardGroup" transform="translate(-617.000000, -373.000000)" fill="#FF5252"><path d="M629,395.488889 L627.32,393.777778 C621.08,388.155556 617,384.366667 617,379.722222 C617,375.933333 619.88,373 623.6,373 C625.64,373 627.68,373.977778 629,375.566667 C630.32,373.977778 632.36,373 634.4,373 C638.12,373 641,375.933333 641,379.722222 C641,384.366667 636.92,388.155556 630.68,393.777778 L629,395.488889 L629,395.488889 Z" id="Shape" sketch:type="MSShapeGroup"></path></g></g></svg>                      <span class="likes-count" ng-if="feed.likes_count > 0">{{feed.likes_count | formatCount}}</span>                    </a>                    <ul class="list-inline likes-list" ng-if="feed.likes && feed.likes.length > 0">                      <li ng-repeat="liker in feed.likes">                        <a ui-sref="user({name: liker.name})">                          <img ng-src="{{liker.avatar}}" class="img-rounded" alt="" ng-cool-tooltip="{{liker.name}}">                        </a>                      </li>                    </ul>                  </div>',
link:function(t,n,o){t.toggleFeedLike=function(){t.feed&&e.toggleLike(t.feed).then(function(e){"success"===e.status&&(t.feed.isLike?t.feed.likes=t.feed.likes.filter(function(e){return e._id!==t.current_user._id}):(t.feed.likes.unshift({_id:t.current_user._id,name:t.current_user.name,avatar:t.current_user.avatar}),t.feed.likes_count+=1),t.feed.isLike=!t.feed.isLike)},function(e){console.log(e)})}}}}]).directive("sfWeatherCard",["$timeout","ngGeo",function(e,t){return{restrict:"AE",scope:{current_user:"=currentUser"},template:'<div class="sf-map-card"><div id="map-container"><div class="weather-city"><i class="ti-location-pin"></i><span>{{weather.city}}</span></div></div><div class="sf-weathers"><div ng-bind-html="weather.icon" class="weather-icon"></div><div class="weather-info"><div class="weather-weather"><span>天气: </span><span>{{weather.weather}}</span></div><div class="weather-temperature"><span>温度: </span><span>{{weather.temperature}}&#176;C</span></div><div class="weather-time"><span>发布时间: </span><span>{{weather.reportTime}}</span></div></div></div></div>',controller:["$scope",function(e){}],link:function(e,n,o){e.$watch("current_user",function(n){if(n){var o="map-container",r="others"===e.current_user.location?"上海市":e.current_user.location;t.initMapByCity(r,o),t.getWeatherByCity(r).then(function(t){t&&(e.weather=t)},function(e){console.log(e)})}})}}}]).directive("sfFeedActionMore",["FeedService","UserService","ngCoolNoti",function(e,t,n){return{retrict:"AE",scope:{feed:"=feed",current_user:"=currentUser"},template:'<div class="dropdown feed-right-dropdown">                      <a class="dropdown-toggle ti-angle-down" data-toggle="dropdown" role="button" aria-expanded="false"></a>                      <ul class="dropdown-menu" role="menu">                        <li class="dropdown-arrow feed-drop-arrow"></li>                        <li ng-if="(current_user._id != feed.creator._id) && feed.creator.hasFollowed"><a ng-click="unfollow(feed)">unfollow {{feed.creator.name}}</a></li>                        <li ng-if="(current_user._id != feed.creator._id) && !feed.creator.hasFollowed"><a ng-click="follow(feed)">follow {{feed.creator.name}}</a></li>                        <li ng-if="current_user._id == feed.creator._id"><a ng-click="delete(feed)">delete post</a></li>                        <li><a ng-click="share(feed)">share feed</a></li>                        <li><a ng-click="bookmark(feed)">bookmark feed</a></li>                        <li><a ui-sref="feed({id: feed._id})">view detail</a></li>                      </ul>                    </div>',link:function(n,o,r){n.follow=function(e){t.follow(e.creator._id).then(function(t){"success"===t.status&&(n.current_user.followers.push(e.creator._id),e.creator.hasFollowed=!0)})},n.unfollow=function(e){t.unfollow(e.creator._id).then(function(t){"success"===t.status&&(e.creator.followees=e.creator.followees.filter(function(e){return e._id!=n.current_user._id}),e.creator.hasFollowed=!1)})},n.bookmark=function(e){},n["delete"]=function(t){e.deleteFeed(t._id).then(function(e){n.current_user.post_count-=1;var t=$(o[0]).parents(".sf-feed"),r='<div class="feed-delete-overlay">                    <div class="delete-wrap">                    <div class="delete-icon">                      <i class="ti-check"></i>                    </div>                    <div class="delete-tip">                      Post deleted                    </div>                    <div class="remove-feed">                      <a class="remove-feed-link">dismiss</a>                    </div>                    </div>                  </div>';t.prepend(r);var i=t.find(".delete-wrap"),a=i.height(),s=i.width();i.css("margin-top",-a/2+"px"),i.css("margin-left",-s/2+"px");var c=t.find(".remove-feed-link");c.on("click",function(){t.remove()})},function(e){console.log(e)})}}}}]).directive("sfFeedComments",["FeedService",function(e){return{restrict:"AE",scope:{feed:"=feed",current_user:"=currentUser"},template:'<div class="comments-more" ng-if="feed.comments.length > 0">            <a ng-click="loadMoreComments()">More Comments</a>          </div>          <div class="feed-comment-item" ng-repeat="comment in feed.comments">            <div class="comment-user-avatar">              <a ui-sref="user({name: comment.creator.name})">                <img ng-src="{{comment.creator.avatar}}" alt="" class="img-rounded">              </a>            </div>            <div class="comment-content">              <div class="top">                <a class="comment-user-name" ui-sref="user({name: comment.creator.name})">{{comment.creator.name}}</a>                <span class="comment-time" ng-cool-tooltip="{{comment.createdAt | date: \'yyyy-MM-dd HH:mm\'}}">{{comment.createdAt | sinceTime}}</span>                <i class="ti-trash pull-right" ng-if="comment.creator._id == current_user._id" ng-click="deleteComment(comment)"></i>              </div>              <div class="comment-words" ng-bind-html="comment.content">              </div>            </div>          </div>',link:function(t,n,o){function r(e){var n=t.feed.comments.some(function(t){return t._id===e._id});return n}t.deleteComment=function(n){e.deleteComment(t.feed._id,n._id).then(function(e){t.feed.comments=t.feed.comments.filter(function(e){return e._id!==n._id})},function(e){console.log(e)})},t.loadMoreComments=function(){var n=t.feed.comments.length;e.loadMoreComments(t.feed._id,n).then(function(e){e.comments.forEach(function(e){r(e)||t.feed.comments.push(e)},function(e){console.log(e)})})}}}}]).directive("sfLogout",["UserService","$state",function(e,t){return{restrict:"AE",template:'<a ng-click="logout()">Logout</a>',link:function(n,o,r){n.logout=function(){e.logout().then(function(e){t.go("welcome")},function(e){console.log(e)})}}}}])}(),function(){angular.module("showfieApp").controller("WelcomeCtrl",["$rootScope","$document",function(e,t){t.title="Welcome to Showfie"}])}(),function(){angular.module("showfieApp").controller("SignupCtrl",["$rootScope","UserService","$state","$timeout","ngCoolNoti",function(e,t,n,o,r){var i=this;i.signUping=!1,i.signUp=function(e){i.spinnerShow=!0,i.signUping=!0,t.signUp(e).then(function(e){"fail"===e.status?(i.spinnerShow=!1,i.signUping=!1,o(function(){r.create({message:e.msg,type:"danger",position:"top-right",timeout:4e3})},1e3)):(i.spinnerShow=!1,i.signUping=!1,o(function(){n.go("home")},500))},function(e){console.log(e.message)})}}]).controller("LoginCtrl",["UserService","$state","$timeout","ngCoolNoti",function(e,t,n,o){var r=this;r.login=function(n){e.login(n).then(function(e){"fail"===e.status?o.create({message:e.msg,type:"danger",position:"top-right",timeout:4e3}):t.go("home")},function(e){console.log(e.message)})}}])}(),function(){"use strict";angular.module("showfieApp").controller("FeedCtrl",["UserService","FeedService","$stateParams","$state",function(e,t,n,o){var r=n.id,i=this;r||o.go("404"),e.currentUser().then(function(e){return i.current_user=e,i.isAuthticated=!0,e}).then(function(t){t&&e.getUserFollowersForAt().then(function(e){i.usersAt=e.users})}),t.getFeedDetail(r).then(function(e){if("video"===e.category){var t=e.attach_files[0],n={src:t.url};e.source=n}if("audio"===e.category){var t=e.attach_files[0],n={audio:{src:t.url,name:t.title||"Unknow",author:t.singer_name||"Unknow",cover:t.cover_url||"images/audio_bg.jpg"}};e.source=n}i.feed=e},function(e){console.log(e)})}])}(),function(){angular.module("showfieApp").controller("HomeCtrl",["UserService","FeedService","$state","ngCoolNoti","$rootScope","$timeout",function(e,t,n,o,r,i){var a=this;a.feeds=[],r.$on("feed:new",function(e,t){s()});var s=function(e){a.loadMoreSpinnerShow=!0,t.getFeeds(e).then(function(e){if(a.loadMoreSpinnerShow=!1,e.feeds&&0===e.feeds.length&&(a.loadMoreTip="没有更多:("),angular.forEach(e.feeds,function(e){if("video"===e.category){var t=e.attach_files[0],n={src:t.url};e.source=n}if("audio"===e.category){var t=e.attach_files[0],n={audio:{src:t.url,name:t.title||"Unknow",author:t.singer_name||"Unknow",cover:t.cover_url||"images/audio_bg.jpg"}};e.source=n}a.feeds.push(e)}),a.feeds.length>0){var t=a.feeds[a.feeds.length-1];a.last_feed_createdAt=t.createdAt}})};e.currentUser().then(function(e){return a.current_user=e,a.isAuthticated=!0,e}).then(function(t){t&&e.getUserFollowersForAt().then(function(e){a.usersAt=e.users})}),s(),a.loadMore=function(){s(a.last_feed_createdAt)},a.logout=function(){e.logout().then(function(e){"success"===e.status?n.go("welcome"):alert("logout wrong!")},function(e){console.log(e)})}}])}(),function(){angular.module("showfieApp").controller("UserCtrl",["UserService","FeedService","$stateParams","$state",function(e,t,n,o){var r=this,i=n.name;e.getUserInfoByName(i).then(function(e){return"success"===e.status?(r.user=e.user,r.user):void o.go("404")},function(e){console.log(e)}).then(function(e){t.getFeedsByUser(e._id).then(function(e){angular.forEach(e,function(e){if("video"===e.category){var t=e.attach_files[0],n={src:t.url};e.source=n}if("audio"===e.category){var t=e.attach_files[0],n={audio:{src:t.url,name:t.title||"Unknow",author:t.singer_name||"Unknow",cover:t.cover_url||"images/audio_bg.jpg"}};e.source=n}}),r.feeds=e},function(e){console.log(e)})}),e.currentUser().then(function(e){r.current_user=e,r.isAuthenticated=!0})}])}(),function(){"use strict";angular.module("showfieApp").controller("SettingCtrl",["UserService","ngCoolNoti","$upload",function(e,t,n){var o=this;o.user={},e.getUserInfo().then(function(e){o.current_user=e.user,angular.copy(o.current_user,o.user),o.isAuthticated=!0}),o.submitSetting=function(n){e.updateInfo(n).then(function(e){"fail"===e.status?t.create({message:e.msg,type:"warning",position:"top-right",timeout:3e3}):(t.create({message:e.msg,type:"success",timeout:3e3}),o.current_user=o.user)},function(e){console.log(e)})},o.uploadAvatarDone=!0,o.uploadBgDone=!0,o.uploadAvatar=function(e){e&&e.length>0&&o.uploadImage(e[0],"user-avatar")},o.uploadPageBg=function(e){e&&e.length>0&&o.uploadImage(e[0],"user-bg")},o.uploadImage=function(e,t){"user-avatar"===t?(o.uploadAvatarDone=!1,o.avatarUploading=!0):(o.uploadBgDone=!1,o.bgUploading=!0),n.upload({url:"/user/upload_image",file:e,fields:{type:t}}).success(function(e,n,r,i){"user-avatar"===t?(o.uploadAvatarDone=!0,o.avatarUploading=!1,o.current_user.avatar=o.user.avatar=e.url):(o.uploadBgDone=!0,o.bgUploading=!1,o.current_user.bg_image=o.user.bg_image=e.url,o.current_user.bg_blur_image=o.user.bg_blur_image=e.blur_url)})}}])}(),function(){"use strict";angular.module("showfieApp").controller("MessageCtrl",["UserService",function(e){var t=this;e.currentUser().then(function(e){return t.current_user=e,t.isAuthticated=!0,e}).then(function(n){e.getNotifications().then(function(e){t.notifications=e})}),t.markAllNoti=function(){e.markAllNoti().then(function(e){t.markedAll=!0,t.current_user.notifications=[]},function(e){console.log(e)})}}])}(),function(){"use strict";angular.module("showfieApp").controller("FollowerCtrl",["UserService","$stateParams",function(e,t){var n=this,o=t.name;e.currentUser().then(function(e){n.current_user=e,n.isAuthticated=!0}),e.getUserFollowers(o).then(function(e){n.user=e.user})}])}(),function(){"use strict";angular.module("showfieApp").controller("FolloweeCtrl",["UserService","$stateParams",function(e,t){var n=this,o=t.name;e.currentUser().then(function(e){n.current_user=e,n.isAuthticated=!0}),e.getUserFollowees(o).then(function(e){n.user=e.user,console.log(n.user)})}])}();